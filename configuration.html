<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.28.2">
    <meta name="project" content="Remedy v0.6.9">

    <title>Advanced Configuration — Remedy v0.6.9</title>
    <link rel="stylesheet" href="dist/elixir-9c72061341c71d26e0ce.css" />

    <script src="dist/sidebar_items-9fe1d55a18.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-073abeeda7b7e6d5d7e9.js"></script>


  </head>
  <body data-type="extras">
    <script>

      try {
        if (localStorage.getItem('night-mode') === 'true') {
          document.body.classList.add('night-mode');
        }
      } catch (error) { }
    </script>

<div class="main">


<section class="sidebar">
  <button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
    <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
  </button>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

      <a href="https://bdanklin.github.io/remedy/">
        <img src="assets/logo.png" alt="Remedy" class="sidebar-projectImage">
      </a>

    <div class="sidebar-projectDetails">
      <a href="https://bdanklin.github.io/remedy/" class="sidebar-projectName" translate="no">
Remedy
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v0.6.9
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">HELLO</a></li>

        <li><a id="modules-list-link" href="#full-list">Modules</a></li>


    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="settings display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


    <a href="https://github.com/bdanklin/remedy/blob/master/hello/introduction/configuration.md#L1" title="View Source" class="view-source" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>

  <span>Advanced Configuration</span>
</h1>

<p>Remedy provides a felxible system for configuration. You can provide secrets as
either environment variables, using <a href="https://hexdocs.pm/elixir/Config.html"><code class="inline">Config</code></a>, or by providing the values when
starting the supervision tree manually. Let's look at what we can configure.</p><h2 id="values" class="section-heading">
  <a href="#values" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">values</p>
  </a>
  Values
</h2>
<p>The available configuration are shown in the following table.</p><table><thead><tr><th style="text-align: left;">env</th><th style="text-align: left;">config</th><th style="text-align: left;">args</th></tr></thead><tbody><tr><td style="text-align: left;"><code class="inline">&quot;REMEDY_TOKEN&quot;</code></td><td style="text-align: left;"><code class="inline">:token</code></td><td style="text-align: left;"><code class="inline">:token</code></td></tr><tr><td style="text-align: left;"><code class="inline">&quot;REMEDY_EMBEDDED&quot;</code></td><td style="text-align: left;"><code class="inline">:embedded</code></td><td style="text-align: left;">n/a</td></tr><tr><td style="text-align: left;"><code class="inline">&quot;REMEDY_GATEWAY_INTENTS&quot;</code></td><td style="text-align: left;"><code class="inline">:gateway_intents</code></td><td style="text-align: left;"><code class="inline">:gateway_intents</code></td></tr><tr><td style="text-align: left;"><code class="inline">&quot;REMEDY_GATEWAY_SHARDS&quot;</code></td><td style="text-align: left;"><code class="inline">:gateway_shards</code></td><td style="text-align: left;"><code class="inline">:gateway_shards</code></td></tr><tr><td style="text-align: left;"><code class="inline">&quot;REMEDY_MIN_WORKERS&quot;</code></td><td style="text-align: left;"><code class="inline">:min_workers</code></td><td style="text-align: left;"><code class="inline">:min_workers</code></td></tr><tr><td style="text-align: left;"><code class="inline">&quot;REMEDY_MAX_WORKERS&quot;</code></td><td style="text-align: left;"><code class="inline">:max_workers</code></td><td style="text-align: left;"><code class="inline">:max_workers</code></td></tr></tbody></table><h3 id="token" class="section-heading">
  <a href="#token" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">token</p>
  </a>
  Token
</h3>
<p>The token can be retreived from your <a href="https://discord.com/developers/applications">Application Dashboard</a>. The token is mandatory.</p><h3 id="embedded" class="section-heading">
  <a href="#embedded" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">embedded</p>
  </a>
  Embedded
</h3>
<ul><li><code class="inline">false</code> (default)</li><li><code class="inline">true</code> - This will indicate to Remedy <strong>Not</strong> to start as part of the application supervision tree. It will be your responsibility to start and supervise the process should you enable this option.</li></ul><p>This functionality is useful in situations such as running Remedy on a Nerves device. In which case you need to delay the starting of Remedy until there is an internet connection available.</p><blockquote><h4 class="warning">Caution</h4><p>It can also be used in situations where you wish to dynamically provide the token and launch multiple instances of Remedy. This functionality should only be used if you know what you are doing. (I don't know what I'm doing)</p></blockquote><blockquote><h4 class="warning">Caution</h4><p><code class="inline">embedded: true</code> is the <strong>only</strong> time <code class="inline">:token</code> can be left unconfigured and passed to <code class="inline">start_link/2</code> manually.</p></blockquote><h3 id="gateway-intents" class="section-heading">
  <a href="#gateway-intents" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">gateway-intents</p>
  </a>
  Gateway Intents
</h3>
<ul><li><code class="inline">:auto</code> - (default) By default all events will be requested.</li><li><code class="inline">integer</code> - Manually selecting Gateway Intents allow you to limit the events that you will receive from the Gateway.</li></ul><h3 id="gateway-shards" class="section-heading">
  <a href="#gateway-shards" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">gateway-shards</p>
  </a>
  Gateway Shards
</h3>
<p>The number of shards to connect. Discord recommend 1 shard per 1000 guilds. However we can shard whenever we like. This is great for Elixir due to the concurrent processing capabilities. By default the shards will auto scale based on the load. We will also run one Dispatch Producer per Shard.</p><h3 id="workers" class="section-heading">
  <a href="#workers" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">workers</p>
  </a>
  Workers
</h3>
<p>The workers are the persistent HTTP Connections used for the API connection pool. By default we will keep 10 connections alive and scale it based on API usage. For more information see <a href="#connection-limits">Connection Limits</a></p><h2 id="heirarchy" class="section-heading">
  <a href="#heirarchy" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">heirarchy</p>
  </a>
  Heirarchy
</h2>
<p>The heirarchy of configuration values is</p><pre><code class="makeup elixir" translate="no"><span class="nc">Arguments</span><span class="w">   </span><span class="o">&gt;</span><span class="w">  </span><span class="nc">Config</span><span class="w">   </span><span class="o">&gt;</span><span class="w">  </span><span class="nc">Environment</span><span class="w"> </span><span class="nc">Variables</span></code></pre><p>That is if you set a config value and an environment variable, the environment variable will be ignored.</p><h3 id="environment-variables" class="section-heading">
  <a href="#environment-variables" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">environment-variables</p>
  </a>
  Environment Variables
</h3>
<p>In all cases it is recommended to use environment variables to store sensitive configuration. So that they are not exposed if you should upload your project to GitHub etc. If a token is uploded to a public repo, Discord will notice and invalidate it.</p><p>To configure your application using a <code class="inline">.env</code> file place it in the root of your application. It will look something like this:</p><pre><code class="makeup elixir" translate="no"><span class="n">export</span><span class="w"> </span><span class="nc">REMEDY_GATEWAY_INTENTS</span><span class="o">=</span><span class="s">&quot;all&quot;</span><span class="w">
</span><span class="n">export</span><span class="w"> </span><span class="nc">REMEDY_MIN_WORKERS</span><span class="o">=</span><span class="s">&quot;2&quot;</span><span class="w">
</span><span class="n">export</span><span class="w"> </span><span class="nc">REMEDY_MAX_WORKERS</span><span class="o">=</span><span class="s">&quot;2&quot;</span><span class="w">
</span><span class="n">export</span><span class="w"> </span><span class="nc">REMEDY_GATEWAY_SHARDS</span><span class="o">=</span><span class="s">&quot;1&quot;</span></code></pre><p>Referencing the environment variables inside your <code class="inline">config.exs</code> will look something like</p><pre><code class="makeup elixir" translate="no"><span class="kn">import</span><span class="w"> </span><span class="nc">Config</span><span class="w">

</span><span class="n">config</span><span class="w"> </span><span class="ss">:remedy</span><span class="w">
  </span><span class="ss">token</span><span class="p">:</span><span class="w"> </span><span class="nc">System</span><span class="o">.</span><span class="n">get_env</span><span class="p" data-group-id="9971559174-1">(</span><span class="s">&quot;REMEDY_TOKEN&quot;</span><span class="p" data-group-id="9971559174-1">)</span><span class="w">
</span></code></pre><h2 id="connection-limits" class="section-heading">
  <a href="#connection-limits" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">connection-limits</p>
  </a>
  Connection Limits
</h2>
<p>Some hosting platforms will limit the number of connections you are allowed to keep active at any one time.
Each shard and HTTP2 worker will count for an individual connection. In addition to any other connections required for your application. Phoenix will establish 10 connections to the database by default. If you are using Heroku free tier (20 connection limit) you could run out of connections for users visiting your web application. In those cases you should consider limiting the number of shards and HTTP2 workers.
We recommend using <a href="https://www.gigalixir.com/">Gigalixir</a> or <a href="https://fly.io/">Fly.io</a> for your hosting platform. The gigalixir free tier has unlimited connections and will allow your bot to run automatically configured shards without issues.</p>
<div class="bottom-actions">
  <div class="bottom-actions-item">

      <a href="api-reference.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
API Reference
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="getting_started.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Getting Started
        </span>
      </a>

  </div>
</div>

      <footer class="footer">

          <p>
            On Hex.pm:

            <span class="line">
              <a href="https://hex.pm/packages/remedy/0.6.9" class="line footer-hex-package">Package</a>
              <a href="https://preview.hex.pm/preview/remedy/0.6.9" class="line">Preview</a>

                <a href="https://preview.hex.pm/preview/remedy/0.6.9/show/hello/introduction/configuration.md">(current file)</a>

            </span>

            <button class="line footer-button display-quick-switch">
              Search
            </button>
          </p>

        <p>
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.28.2) for the
          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
